{"version":3,"sources":["Pages/background.png","Pages/Data.jsx","App.js","reportWebVitals.js","index.js"],"names":["book","xlsx","utils","book_new","Text","Typography","Title","Data","props","console","log","useState","taobaoResult","setTaobaoResult","useEffect","undefined","match","params","name","axios","get","process","then","res","data","newres","map","el","cheapest","disabled","selected","weight","taobaoColumn","title","key","dataIndex","render","value","record","index","direction","align","width","Group","fileName","onChange","e","target","list","price","i","style","opacity","href","link","charAt","className","src","imgsrc","level","float","fontSize","fontWeight","marginTop","mark","count","replace","badge","length","display","height","elm","backgroundImage","BackgroundImg","bordered","checked","size","saveTaobaoData","a","newData","filter","checkDone","message","error","Promise","all","parseData","saveToExcel","dataWithTitle","push","sheetData","aoa_to_sheet","book_append_sheet","write","bookType","type","result","saveAs","Blob","s2ab","success","s","buf","ArrayBuffer","view","Uint8Array","charCodeAt","onClick","block","icon","SaveOutlined","dataSource","columns","pagination","rowKey","rowClassName","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2694f98d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/background.b1eebc25.png\";","import React, { useState, useEffect } from 'react'\r\nimport { Spin, Table, Button, Input, Switch, Radio, Space, message, Typography } from 'antd'\r\nimport {SaveOutlined} from '@ant-design/icons';\r\nimport BackgroundImg from './background.png'\r\nimport {saveAs} from 'file-saver'\r\nimport xlsx from 'xlsx'\r\nimport axios from 'axios';\r\nconst book = xlsx.utils.book_new();\r\nconst { Text, Title } = Typography;\r\n\r\nconst Data = (props) => {\r\n    console.log(props)\r\n    const [taobaoResult, setTaobaoResult] = useState([])\r\n\r\n    useEffect(()=>{\r\n        if(props.match.params.name !== undefined){\r\n            axios.get(`${process.env.PUBLIC_URL}/Source/${props.match.params.name}.json`)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                if(res.data !== taobaoResult){\r\n                    let newres = res.data.map(el=>{\r\n                      el.cheapest = 0;\r\n                      el.disabled = false\r\n                      el.selected = ''\r\n                      el.weight = 1\r\n                      return el\r\n                    })\r\n                    setTaobaoResult(newres)\r\n                }\r\n            })\r\n        }\r\n    }, [props])\r\n\r\n    const taobaoColumn = [{\r\n        title: 'title', \r\n        key: 'fileName', \r\n        dataIndex: 'fileName',\r\n        render: (value, record, index) => <Space direction=\"vertical\">\r\n          {/* <img src={`${imageFolder}/${value}`} /> */}\r\n          <Text>{value}</Text>\r\n        </Space>,\r\n        align: 'center',\r\n        width: 80\r\n      },{\r\n        title: 'data',\r\n        dataIndex: 'data',\r\n        key: 'data',\r\n        width: 952,\r\n        align: 'left',\r\n        render: (value, record, index) => {\r\n          const onChange = e => {\r\n            let value = e.target.value\r\n            let list = [...taobaoResult]\r\n            list[index].selected = value\r\n            list[index].cheapest = list[index].data[value].price\r\n            setTaobaoResult(list)\r\n          }\r\n          return value && value !== undefined ? \r\n          <Radio.Group name={record.fileName} onChange={onChange} value={record.selected}>\r\n          <Space>\r\n            {value.map((el, i) => \r\n              <div style={{width: '110px'}} key={i}>\r\n                <Radio value={i}>{i+1}</Radio>\r\n                <div style={record.selected !== '' && record.selected !== i ? {opacity: 0.6} : {}}>\r\n                <a href={el.link.charAt(0) === '/' ? `https:${el.link}` : el.link} target='_blank'><img className='taobaoThumb' src={el.imgsrc} /></a>\r\n                <div>\r\n                  <Title level={5}>\r\n                    ¥ {el.price}\r\n                    <Text style={{float:'right', fontSize: '12px', fontWeight: 500, marginTop: '2px'}} mark>{el.count.replace('人付款','건')}</Text>\r\n                  </Title>\r\n                </div>\r\n                <Space>\r\n                  {el.badge.length === 0 ? \r\n                    <span style={{display: 'inline-block', width:16, height: 16}}></span>\r\n                    : el.badge.map((elm, i)=> <span key={i} style={{backgroundImage: `url(${BackgroundImg})`}} className={elm}></span>)}\r\n                </Space>\r\n                </div>\r\n              </div>)\r\n            }\r\n          </Space></Radio.Group> : '' \r\n        },\r\n      },{\r\n        title: 'weight',\r\n        dataIndex: 'weight',\r\n        key: 'weight',\r\n        align: 'center',\r\n        render: (value, record, index) => {\r\n          const editTitle = (e) => {\r\n            let value = e.target.value\r\n            let list = [...taobaoResult]\r\n            list[index].weight = value\r\n            setTaobaoResult(list)\r\n          }\r\n          return <Input disabled={record.disabled} bordered={false} style={{fontSize: '12px'}} value={value} onChange={editTitle}/>\r\n        },\r\n      },{\r\n        title: 'active', \r\n        dataIndex: 'disabled',\r\n        key: 'disabled', \r\n        render: (value, record, i) => {\r\n          return <Switch\r\n            checked={!value}\r\n            size=\"small\"\r\n            onChange={(checked) => {\r\n              let list = [...taobaoResult]\r\n              list[i].disabled = !checked\r\n              setTaobaoResult(list)\r\n            }}\r\n          />},\r\n        align: 'center',\r\n        width: 60\r\n      }\r\n    ]\r\n\r\n    const saveTaobaoData = async () => {\r\n        let newData = taobaoResult.filter(el => el.disabled === false)\r\n        let checkDone = newData.filter(el => el.selected === '' || el.cheapest === 0)\r\n        console.log(newData, checkDone)\r\n        if(checkDone.length > 0) {\r\n          message.error('데이터를 확인해주세요. 가격이나 선택이 빠진 상품이 있습니다.')\r\n        }else{\r\n          let parseData = await Promise.all(newData.map(el => {\r\n            return [\r\n              el.fileName.replace('.jpg', ''),\r\n              el.data[el.selected].link,\r\n              el.cheapest,\r\n              el.weight\r\n            ]\r\n          }))\r\n          saveToExcel(parseData)\r\n        }\r\n    }\r\n\r\n    const saveToExcel = async(data) => {\r\n        try {\r\n          console.log('생성시작')\r\n          let dataWithTitle = [['filename', 'url', '최저가격','무게']]\r\n          for(let i=0; i<data.length; i++){\r\n            dataWithTitle.push(data[i])\r\n          }\r\n          console.log(dataWithTitle)\r\n          let sheetData = xlsx.utils.aoa_to_sheet(dataWithTitle)\r\n          console.log('시트데이터 생성완료')\r\n          xlsx.utils.book_append_sheet(book, sheetData, 'data')\r\n          console.log('시트데이터 삽입완료')\r\n          const result = await xlsx.write(book, {bookType: 'xlsx', type: 'binary'})\r\n          saveAs(new Blob([s2ab(result)],{type:\"application/octet-stream\"}), 'result.xlsx');\r\n          console.log('파일생성완료')\r\n          message.success('저장이 완료되었습니다.')\r\n        }catch{\r\n          message.error('뭔가 잘못됨')\r\n        }\r\n    }\r\n\r\n    function s2ab(s) { \r\n        var buf = new ArrayBuffer(s.length); //convert s to arrayBuffer\r\n        var view = new Uint8Array(buf);  //create uint8array as viewer\r\n        for (var i=0; i<s.length; i++) view[i] = s.charCodeAt(i) & 0xFF; //convert to octet\r\n        return buf;    \r\n    }\r\n\r\n    return (\r\n        <Table\r\n            title={()=><Button disabled={taobaoResult.length === 0} onClick={saveTaobaoData} block type=\"primary\" icon={<SaveOutlined />}>데이터 저장하기</Button>}\r\n            style={{marginTop: '20px'}}\r\n            dataSource={taobaoResult}\r\n            size='small'\r\n            columns={taobaoColumn}\r\n            pagination={false}\r\n            rowKey='fileName'\r\n            bordered\r\n            rowClassName={(record, index)=> record.disabled ? 'disabled' : ''}\r\n        />\r\n    )\r\n}\r\nexport default Data","import './App.css';\r\nimport React from 'react'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\nimport 'antd/dist/antd.css'\r\nimport Data from './Pages/Data'\r\n\r\nexport default function App() {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n          <Route path={`/${process.env.PUBLIC_URL}/:name`} component={Data}/>\r\n          <Route path={`/${process.env.PUBLIC_URL}`} component={Data}/>\r\n        </Switch>\r\n    </Router>\r\n  );\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}